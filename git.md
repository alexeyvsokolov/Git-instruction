[< back](/readme.md)

# Git

**Система контроля версий** – это система, записывающая изменения в файл или набор файлов в течении времени и позволяющая вернуться позже к определенной версии.

## Git - распределённая система управления версиями.

Подход Git к хранению данных похож на набор снимков миниатюрной файловой системы. Каждый раз, когда делается коммит, то есть сохраняется состояние проекта в Git, система запоминает, как выглядит каждый файл в этот момент, и сохраняет ссылку на этот снимок. Для увеличения эффективности, если файлы не были изменены, Git не запоминает эти файлы вновь, а только создаёт ссылку на предыдущую версию идентичного файла, который уже сохранён. Git представляет свои данные как, поток снимков.

Почти все операции выполняются локально.

Для работы большинства операций в Git достаточно локальных файлов и ресурсов — в основном, системе не нужна никакая информация с других компьютеров сети. Вся история проекта хранится прямо на локальном диске, большинство операций мгновенны.

Для просмотра истории проекта, Git не нужно соединяться с сервером для её получения и отображения — система просто считывает данные напрямую из локальной базы данных, поэтому история проекта видна моментально. Чтобы посмотреть изменения, сделанные между текущей версией файла и версией, созданной месяц назад, Git может найти файл месячной давности и локально вычислить изменения, вместо того, чтобы запрашивать удалённый сервер выполнить эту операцию, либо вместо получения старой версии файла с сервера и выполнения операции локально.

Есть небольшое количество действий, которые нельзя выполнить, если находиться оффлайн или не иметь доступа к VPN в данный момент. Можно создавать коммиты без каких-либо проблем (в локальную копию), когда будет возможность подключиться к сети, все изменения можно будет синхронизировать.

В Git для всего вычисляется хеш-сумма, и только потом происходит сохранение. В дальнейшем обращение к сохранённым объектам происходит по этой хеш-сумме. Невозможно изменить содержимое файла или каталога так, чтобы Git не узнал об этом. Невозможно потерять информацию во время её передачи и получите повреждённый файл без ведома Git.
Механизм, которым пользуется Git при вычислении хеш-сумм, называется **SHA-1** хеш. Это строка длиной в 40 шестнадцатеричных символов (0-9 и a-f), она вычисляется на основе содержимого файла или структуры каталога. SHA-1 хеш выглядит примерно так:

```
35a8cb9317568241ca321a43e4789bd5f4c13481
```

Git сохраняет все объекты в свою базу данных не по имени, а по хеш-сумме содержимого объекта.

Когда производятся какие-либо действия в Git, практически все из них только добавляют новые данные в базу Git. Очень сложно заставить систему удалить данные либо сделать что-то, что нельзя впоследствии отменить. Можно потерять или испортить изменения, пока они не зафиксированы, но после того, как зафиксирован снимок в Git, будет очень сложно что-либо потерять, особенно, если регулярно синхронизируется база с другим репозиторием.

**У Git есть три основных состояния, в которых могут находиться файлы: изменён (modified), индексирован (staged) и зафиксирован (committed):**

К **изменённым** относятся файлы, которые поменялись, но ещё не были зафиксированы.

**Индексированный** — это изменённый файл в его текущей версии, отмеченный для включения в следующий коммит.

**Зафиксированный** значит, что файл уже сохранён в локальной базе.

**Три основные секции проекта Git: рабочая копия (working tree), область индексирования (staging area) и каталог Git (Git directory).**

**Рабочая копия** является снимком одной версии проекта. Эти файлы извлекаются из сжатой базы данных в каталоге Git и помещаются на диск, для того чтобы их можно было использовать или редактировать.

**Область индексирования (индекс - техническое название на языке Git)** — это файл, обычно находящийся в каталоге Git, в нём содержится информация о том, что попадёт в следующий коммит.

**Каталог Git** — это то место, где Git хранит метаданные и базу объектов проекта. Это самая важная часть Git и это та часть, которая копируется при клонировании репозитория с другого компьютера.

**Базовый подход в работе с Git:**
1. Изменение файлов рабочей копии.
2. Выборочное добавление в индекс только тех изменений, которые должны попасть в следующий коммит, добавляя тем самым снимки только этих изменений в индекс.
3. Когда делается коммит, используются файлы из индекса как есть, и этот снимок сохраняется в каталог Git.

Если определённая версия файла есть в каталоге Git, эта версия считается зафиксированной (committed). Если файл был изменён и добавлен в индекс, значит, он индексирован (staged). И если файл был изменён с момента последнего распаковывания из репозитория, но не был добавлен в индекс, он считается изменённым (modified).

---

Конспект [Части 1.3 книги Pro Git](https://git-scm.com/book/ru/v2/Введение-Что-такое-Git%3F)

Pro Git book, by Scott Chacon and Ben Straub - https://git-scm.com/book/en/v2, license: [CC BY-NC-SA 3.0](https://creativecommons.org/licenses/by-nc-sa/3.0/)
